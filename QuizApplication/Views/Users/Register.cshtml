@model QuizApplication.Models.Users
@{
    ViewData["Title"] = "Register";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="register-sky">
    <div class="stars"></div>
    <div class="moon"></div>
</div>

<div class="container py-5 position-relative" style="z-index:1;">
    <div class="row justify-content-center">
        <div class="col-lg-6 col-md-8">
            <div class="card register-card shadow-lg border-0">
                <div class="card-header bg-transparent border-0 text-center pt-4">
                    <div class="register-logo mb-2">
                        <i class="fas fa-moon"></i>
                    </div>
                    <h3 class="text-white mb-1 fw-bold">Create your account</h3>
                    <p class="text-muted mb-0">Join under the moonlight and start your journey</p>
                </div>
                <div class="card-body p-4">
                    @if (ViewBag.Error != null)
                    {
                        <div class="alert alert-danger game-alert slide-in">
                            <i class="fas fa-exclamation-triangle me-2"></i>@ViewBag.Error
                        </div>
                    }

                    <form method="post" action="@Url.Action("Register", "Users")">
                        <div class="mb-3 position-relative">
                            <label asp-for="Username" class="form-label text-light fw-semibold">
                                <i class="fas fa-user me-2"></i>Username
                            </label>
                            <input asp-for="Username" class="form-control form-moon" required>
                            <span asp-validation-for="Username" class="text-danger small"></span>
                        </div>

                        <div class="mb-3 position-relative">
                            <label asp-for="Email" class="form-label text-light fw-semibold">
                                <i class="fas fa-envelope me-2"></i>Email
                            </label>
                            <input asp-for="Email" type="email" class="form-control form-moon" required>
                            <span asp-validation-for="Email" class="text-danger small"></span>
                        </div>

                        <div class="mb-3 position-relative">
                            <label asp-for="PasswordHash" class="form-label text-light fw-semibold">
                                <i class="fas fa-lock me-2"></i>Password
                            </label>
                            <input asp-for="PasswordHash" type="password" class="form-control form-moon" required>
                            <span asp-validation-for="PasswordHash" class="text-danger small"></span>
                        </div>

                        <div class="mb-3 position-relative">
                            <label for="confirmPassword" class="form-label text-light fw-semibold">
                                <i class="fas fa-shield-alt me-2"></i>Confirm Password
                            </label>
                            <input type="password" class="form-control form-moon" id="confirmPassword" name="confirmPassword" required>
                        </div>

                        <div class="mb-4">
                            <label asp-for="Role" class="form-label text-light fw-semibold">
                                <i class="fas fa-user-tag me-2"></i>Role
                            </label>
                            <select asp-for="Role" class="form-select form-moon-select">
                                <option value="User">User</option>
                                <option value="Admin">Admin</option>
                            </select>
                        </div>

                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-moon btn-lg">
                                <i class="fas fa-user-plus me-2"></i> Register
                            </button>
                        </div>
                    </form>

                    <div class="text-center mt-4">
                        <span class="text-muted">Already have an account?</span>
                        <a href="@Url.Action("Index", "Users")" class="ms-2 link-light text-decoration-none fw-semibold">
                            <i class="fas fa-sign-in-alt me-1"></i>Login
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .register-sky { position: fixed; inset: 0; background: linear-gradient(135deg, #0b1533 0%, #142b6f 100%); z-index:0; }
    .register-sky .stars, .register-sky .stars:before, .register-sky .stars:after { content:""; position:absolute; inset:0; background: transparent url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='3' height='3' viewBox='0 0 3 3'%3E%3Ccircle cx='1' cy='1' r='1' fill='white'/%3E%3C/svg%3E") repeat; opacity:.18; animation: drift 160s linear infinite; }
    .register-sky .stars:before { opacity:.28; animation-duration: 220s; transform: translateY(-30px); }
    .register-sky .stars:after { opacity:.12; animation-duration: 280s; transform: translateY(20px); }
    @@keyframes drift { from { transform: translateX(0) } to { transform: translateX(240px) } }
    .register-sky .moon { position:absolute; top:6%; right:10%; width:110px; height:110px; border-radius:50%; box-shadow:-22px 10px 0 0 rgba(255,255,255,.92); filter: drop-shadow(0 0 10px rgba(255,255,255,.4)) drop-shadow(0 0 30px rgba(100,160,255,.18)); }

    .register-card { background: radial-gradient(600px 300px at 80% 0%, rgba(52,85,241,.12), transparent 60%), rgba(255,255,255,0.06); backdrop-filter: blur(16px); border-radius: 24px; }
    .register-logo { width:84px; height:84px; border-radius:50%; display:flex; align-items:center; justify-content:center; margin:0 auto; background: linear-gradient(135deg,#3455f1,#4b6ef7); color:#fff; box-shadow: 0 12px 30px rgba(52,85,241,.35); }
    .register-logo i { font-size: 2rem; }

    .form-moon { background: rgba(255,255,255,0.12) !important; border: 2px solid rgba(255,255,255,0.25); color: #e8efff !important; border-radius: 14px; padding: .9rem 1rem; }
    .form-moon:focus { background: rgba(255,255,255,0.16) !important; border-color: #4b6ef7; box-shadow: 0 0 0 .2rem rgba(75,110,247,0.25); }
    .form-moon::placeholder { color: rgba(232,239,255,.55) !important; }

    .form-moon-select { background: rgba(255,255,255,0.12); border: 2px solid rgba(255,255,255,0.25); color:#e8efff; border-radius: 14px; }
    .form-moon-select option { color:#0b1533; }

    .btn-moon { background: linear-gradient(135deg, #3455f1 0%, #4b6ef7 100%); color:#fff; border:none; border-radius: 14px; box-shadow: 0 14px 32px rgba(52,85,241,.35); }
    .btn-moon:hover { transform: translateY(-2px); box-shadow: 0 18px 40px rgba(52,85,241,.45); }

    .game-alert { background: linear-gradient(135deg, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0.1) 100%) !important; border: 2px solid rgba(255, 255, 255, 0.3) !important; color: #fff !important; border-radius: 12px; }
    .slide-in { animation: slideIn .5s ease-out; }
    @@keyframes slideIn { from { opacity:0; transform: translateY(-8px) } to { opacity:1; transform: translateY(0) } }
</style>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
